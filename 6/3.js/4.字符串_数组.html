<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>KEEP MOVING</title>
</head>
<body>

<script type="text/javascript">

  //一、字符串
  // 1.常用方法
  //substr-substring-slice split
  //concat indexOf lastIndexOf length
  //charAt charCodeAt toUpperCase toLowerCase
  //match replace   match:匹配之后是一个数组，没有匹配的返回null；

  // substr-substring-slice
  var str1 = 'BeiJing';
  console.log('str1:', str1.substr(3, 1));//字符串开始位置，长度
  console.log('str1:', str1.substring(1, 3));//开始位置，结束位置；可调换顺序
  console.log('str1:', str1.slice(1, 3));//开始位置，结束位置；不可调换顺序

  // concat
  var str2 = 'hello';
  console.log('str2:', str2.concat('world', '!!!'));

  // charAt charCodeAt
  var str3 = 'test';
  console.log('str3:', str3.charAt(1)); // 返回指定位置的字符
  console.log('str3:', str3.charCodeAt(1)); // 位于指定位置的字符的编码，返回值是 0 - 65535 之间的整数

  // match
  var str4 = 'abcd';
  var result = str4.match(/[a-z]/ig);
  console.log('str4:', result instanceof Array);

  //2.String() .toString() toLocaleString()
  /*
  String和toString都可以将数据转换成字符串类型
  .toString()可以将任何数据转换为字符串类型，但是null 和 undefined 排除在外。
  .toString()可以转换进制字符串
  * */

  // toString
  console.log('toString:', 5..toString(2)); // 101


  // toLocaleString
  // 用法1：toLocaleString() 把数组/number/时间转换为本地字符串
  console.log('toLocaleString', [1, 2, 3].toLocaleString()); // 1,2,3
  console.log('toLocaleString', 2333333..toLocaleString()); // 2,333,333 (显示价格可用)
  console.log('toLocaleString', new Date().toLocaleString()); // 2020/4/28 下午3:37:35


  console.log('*******************');


  //数组
  //splice slice sort forEach map filter
  //concat indexOf lastIndexOf length
  // push pop unshift shift reverse join
  // some every reduce
  //toString




  // 是否改变原数组
  // let arr = [
  //   {
  //     name: '杨幂',
  //     age: 10
  //   },
  //   {
  //     name: '刘亦菲',
  //     age: 20
  //   }
  // ];

  // 不改变原数组：
  // console.log(arr.concat([{name: '刘诗诗', age: 30}]));
  // console.log(arr.join(''));
  // console.log(arr.slice(0, 1));
  // console.log(arr.toString());
  // console.log(arr);

  // 改变原数组：
  // console.log(arr.push({name: '刘诗诗', age: 30}));
  // console.log(arr.pop());
  // console.log(arr.reverse());
  // console.log(arr.shift());
  // console.log(arr.unshift({name: '刘诗诗', age: 30}));
  // console.log(arr.sort());
  // console.log(arr.splice(1, 1));




  // (concat里面可以是数组，也可以是值)
  let arr1 = [1];
  console.log('arr1:', arr1.concat(2, 3));

  var forEachArr = [1, 2, 3];

  // forEach()不会返回数据
  let forEachArrNew = forEachArr.forEach(item => item + 1);
  console.log('forEachArr：', forEachArr); // [1, 2, 3]
  console.log('forEachArrNew：', forEachArrNew); // undefined

  // map()会分配内存空间存储新数组并返回，而且更快
  var mapArr = [1, 2, 3];
  let mapArrNew = mapArr.map(item => item + 1);
  console.log('mapArr：', mapArr); // [1, 2, 3]
  console.log('mapArrNew：', mapArrNew); // [2, 3, 4]

  var filterArr = [1, 2, 3];
  let filterArrNew = filterArr.map(item => item + 1);
  console.log('filterArr：', filterArr); // [1, 2, 3]
  console.log('filterArrNew：', filterArrNew); // [2, 3, 4]

  // map() 不会改变原始数组。
  // filter() 不会改变原始数组。
  // 对于基本类型数据，不会改变；
  // 对于引用类型数据，如果也不改变，需要这样处理：
  // {
  // ...item,
  //   age: item.age+2
  // }

  // forEach也是看遍历的数组的每一项是基本类型数据，还是引用类型数据

  // 例子🌰
  let objArr = [
    {
      name: 'liming',
      age: 12
    },
    {
      name: 'lihua',
      age: 20
    },
  ];
  objArr.forEach(item => {
    return {
      ...item,
      age: item.age+2
    };
  });
  console.log('88888', objArr);

  //1.使用 .forEach来遍历
  /*var arr = [12, true, 'lift', 66, 'catch'];
  var result = arr.forEach(function (item, index) {
      console.log(item, index);
  });*/

  //2.使用 .some和.every来断言
  // .some方法可以在遍历数组中的每个元素时执行回调函数，直到回调函数返回true为止
  // .every也是同样的道理，但他的短路是发生在回调函数返回false时。
  /*var max = 0;
  var satisfied = [10, 12, 10, 8, 5, 23].some(function (item, index, array) {
      //当为8时，返回true
      if (item > max) max = item;
      console.log(item, index, array, max);
      return item < 10
  });

  console.log(max);//12
  console.log(satisfied); //true  返回值是布尔类型
*/
  //3.使用 .join and .concat 来合并
  /*var str = 'heslhdelsdllo';
  console.log(str.split('e')); //["h", "slhd", "lsdllo"]

  var arr = [12, true, 'lift', 66, 'catch'];
  console.log(arr.join('%%'));
  console.log(typeof arr.join(''));

  console.log(arr.concat([11, 22]));*/

  //4.使用 .pop, .push, .shift, and .unshift 来操作栈和队列
  //联想栈的结构
  //var arr = [12, true, 'lift', 66, 'catch'];
  //arr.pop();//删除尾部元素
  //arr.push('abc', 'sd');//向尾部添加元素
  //arr.shift();//删除头部元素
  //arr.unshift(20);
  //console.log(arr);

  //5.使用 .map 映射模型
  //.map在遍历数组中的每个元素时执行一次回调函数，并且会返回一个新的数组。
  //回调函数只会对数组的元素索引执行，并不会对已删除或没元素的索引而执行。
  /*var arr = [12, true, 'lift', 66, 'catch'];
  var result = arr.map(function(item, index, array){
      console.log(item, index, array);
      return item;
  });
  console.log(result instanceof Array);  //true 返回值是一个数组*/

  //6.使用 .filter 来做查询
  // .filter在遍历数组中的每个元素时执行一次回调函数，
  // 并且回调函数返回的true时，他将会保存这当前元素，最后返回一个新数组。
  /*var arr1 = [0, null, undefined, false, true, 1, '', 'abc'];
  var result = arr1.filter(function(item){
      return item;
  });
  console.log(result);  //[true, 1, "abc"]
  console.log(result instanceof Array); //true 返回值是一个新数组*/

  //7.使用.sort 来做排序
  var arr2 = [9, 80, 3, 10, 5, 6];
  var result2 = arr2.sort(function (a, b) {
    return a - b; //正序
    //return 0; //不改变顺序
    //return b - a; //逆序
  });
  console.log('result2:', result2); // [3, 5, 6, 9, 10, 80]   返回一个正序的新数组

  var arr3 = [{test: 1}, {test: 3}, {test: 2}];
  var resulet3 = arr3.sort(function (a, b) {
    return a.test - b.test
  });
  console.log('result3:', resulet3);

  //    8.indexOf,lastIndexOf（第二个参数表示从第几项开始检索）
  var arr = [9, 80, 3, 10, 5, 10, 6];
  console.log(arr.indexOf(10, 1));  //3
  console.log(arr.lastIndexOf(10));  //5

  // 和字符串的indexOf区别
  var str = 'abcdecba';
  console.log(str.indexOf('c'));  //2
  console.log(str.lastIndexOf('c'));  //5

  //    9.reduce(), reduceRight()
  // array.reduce(function(total, currentValue, currentIndex, arr), initialValue)
  //接收一个函数作为累加器（accumulator），数组中的每个值（从左到右）开始合并，最终为一个值。
  var arr9 = [1, 2, 3];
  var result9 = arr9.reduce(function (total, item) {
    console.log(total, item);
    return total + item
  }, 100);
  console.log('result9:', result9);


</script>
</body>
</html>