<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>KEEP MOVING</title>
</head>
<body>

<script type="text/javascript">
    //回调函数是在for结束之后才运行的
    //所以运用立即执行函数
    /*for(var i=0; i<3; i++){
        setTimeout((function(i){
            console.log(i);
        })(i), 1);
    }*/

    // 闭包：对于嵌套的两个函数，外部函数执行完毕后，内部函数依然可以访问外部函数当中的变量，就叫做闭包。

    //闭包举例,面试就举这个例子
    function fun1(){
      var a = 1;
      function fun2(){
        a++;
        console.log(a);
      }
      return fun2;
    }
    var result = fun1();
    result();
    result();

    // 闭包应用：
    // 1.循环遍历加监听；（for循环，onclick/setTimeout）
    // 2.封装私有变量；（封装函数库：jQuery函数库）
    // 3.函数防&抖节流；参考：6/10.新增/8.防抖&节流.html
    // 4.函数柯里化；参考：6/10.新增/13.函数柯里化.html


    // 内存泄漏：任何对象在不需要使用它时仍然存在；
    
    
    //造成内存泄漏：闭包 setTimeout(非函数，1000) 两个对象彼此引用(循环) 控制台日志
  
  // 防止内存泄漏
  // 1.不使用的变量，且无彼此引用，置为null；(垃圾回收机制：JavaScript 中的内存管理是自动执行的，而且是不可见的。)
  // 2.少绑事件，可用事件冒泡在父容器监听事件；

    // JS垃圾回收方式：
    // 标记清除
    // 引用计数

</script>
</body>
</html>