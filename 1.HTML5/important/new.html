<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
    <link rel="stylesheet" href="css/cssreset.css">
    <script src="js/获取元素的样式(宽高等)getStyle.js"></script>
    <!--   <style>
           .wrapper{
               min-width: 320px;
               max-width: 640px;
               background-color: #bfa;
               margin: 0 auto;
           }
           .box{
               width: 100%;
               background-color: fuchsia;
               /*overflow-y:auto;*/
               opacity: 0.5;
           }
           .box1{
               text-align: center;
              background-color: chartreuse;
               position:fixed;
               color: red;
               z-index: 9999;
               opacity: 0.5;
           }
           .box2{
               width: 400px;
               background-color: yellow;
               margin: 0 auto;
           }
       </style>-->
</head>
<body>
<p>nihao到夜半的笑声，吃吃地，似乎不愿意惊动睡着的人，然而四围的空气都应和着笑。夜半，没有别的人，我即刻听出这声音就在我嘴里，我也即刻被这笑声所驱逐，回进自己的房。灯火的带子也即刻被我旋高了。
    后窗的玻璃上丁丁地响，还有许多小飞虫乱撞。不多久，几个进来了，许是从窗纸的破孔进来的。他们一进来，又在玻璃的灯罩上撞得丁丁地响。一个从上面撞进去了，他于是遇到火，而且我以为这火是真的。两三个却休息在灯的纸罩上喘气。那罩是昨晚新换的罩，雪白的纸，折出波浪纹的叠痕，一角还画出一枝猩红色的栀子。
    猩红的栀子开花时，听到夜半的笑声，吃吃地，似乎不愿意惊动睡着的人，然而四围的空气都应和着笑。夜半，没有别的人，我即刻听出这声音就在我嘴里，我也即刻被这笑声所驱逐，回进自己的房。灯火的带子也即刻被我旋高了。
    后窗的玻璃上丁丁地响，还有许多小飞虫乱撞。不多久，几个进来了，许是从窗纸的破孔进来的。他们一进来，又在玻璃的灯罩上撞得丁丁地响。一个从上面撞进去了，他于是遇到火，而且我以为这火是真的。两三个却休息在灯的纸罩上喘气。那罩是昨晚新换的罩，雪白的纸，折出波浪纹的叠痕，一角还画出一枝猩红色的栀子。
    猩红的栀子开花时，</p>
<div id="box" style="height:2000px;width:3000px;background-color: #bfa">
    <div id="div1" style="width:500px;height:500px;background:green;position:absolute;">
        <div id="div2" style="width:200px;height:100px;background:lightblue;position:fixed;">里面的div</div>
    </div>
</div>
</body>
<script type="text/javascript">
    var sTop = 0;            //初始卷起的高度
    var sLeft = 0;            //初始卷起的宽度
    var p_div = document.getElementById("div1");        //父div
    var max_x = p_div.offsetLeft + p_div.offsetWidth;        //父div的右边界
    var max_y = p_div.offsetTop + p_div.offsetHeight;        //父div的下边界
    window.onscroll = function () {
        var c_div = document.getElementById("div2");    //子div
        var s_top = document.documentElement.scrollTop || document.body.scrollTop;            //卷起的高度
        var s_left = document.documentElement.scrollLeft || document.body.scrollLeft;        //卷起的宽度
        if (s_top != sTop) {        //纵向滚动，当前卷起的高度和原卷起的高度不一致
            sTop = s_top;
            c_y = s_top + p_div.offsetTop + c_div.offsetHeight;            //子div当前的下边界坐标
            if (c_y >= max_y) {                //如果下边界超过父div下边界
                c_div.style.position = "relative";
                c_div.style.top = (p_div.offsetHeight - c_div.offsetHeight) + "px";
                c_div.style.left = s_left + "px";
            } else {
                c_div.style.position = "fixed";
                c_div.style.top = "";
                c_div.style.left = "";
            }
        }
        if (s_left != sLeft) {        //纵向滚动
            sLeft = s_left;
            c_x = s_left + p_div.offsetLeft + c_div.offsetWidth;
            if (c_x >= max_x) {
                c_div.style.position = "relative";
                c_div.style.left = (p_div.offsetWidth - c_div.offsetWidth) + "px";
                c_div.style.top = s_top + "px";
            } else {
                c_div.style.position = "fixed";
                c_div.style.left = "";
                c_div.style.top = "";
            }
        }
    }
</script>
</html>